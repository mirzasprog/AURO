<!--Rola: Interna / Podrucni / Regionalni-->
<nb-card *ngIf="rola !== 'prodavnica'" id="kartica">
  <nb-card-header>
    <div class="card-header text-center" id="header">
      <h6 id="naslov"><nb-icon icon="browser"></nb-icon> Radna ploča</h6>
  </div> 
  </nb-card-header>
  <nb-card-body>
    <div class="card-grid" >
      <!--Otpisi-->
      <div class="card card-shadow" id="karticaInterna">
        <div class="card-header card-image" style="background: linear-gradient(to right, #5f64ff, #7ba0fe);">
        </div>
        <div class="card-body">
          <p>Pregled napravljenih otpisa!</p>
        </div>
        <div class="card-footer">
          <button class="button" nbButton status="primary" hero shape="semi-round" size="small" (click)="PregledRedovnogOtpisa()">
            <nb-icon icon="external-link-outline"></nb-icon> Pregled otpisa
          </button>
        </div>
      </div>
      <!--Izdatnice troška-->
      <div class="card card-shadow" id="karticaInterna">
        <div class="card-header card-image" style="background: linear-gradient(to right, #11e24c, #9cfe7b);">
        </div>
        <div class="card-body">
          <p>Pregled izdatnica troška!</p>
        </div>
        <div class="card-footer">
          <button class="button" nbButton status="primary" hero size="small" shape="semi-round" (click)="Izdatnice()">
            <nb-icon icon="external-link-outline"></nb-icon> Izdatnica Troška
          </button>
        </div>
      </div>
      <!--Neuslovna roba-->
      <div class="card card-shadow" id="karticaInterna">
        <div class="card-header card-image" style="background: linear-gradient(to right, #fd4b4b, #fe7b7b);">
        </div>
        <div class="card-body">
          <p>Pregled robe neuslovne za prodaju!</p>
        </div>
        <div class="card-footer">
          <button class="button" id="button" nbButton status="primary"  hero shape="semi-round" size="small"
           (click)="NeuslovnaRoba()">
            <nb-icon icon="external-link-outline"></nb-icon> Neuslovna Roba
          </button>
        </div>
      </div>
    </div>
  </nb-card-body>
</nb-card>
<!--Rola: Prodavnica-->
<nb-card *ngIf="rola == 'prodavnica'" id="kartica">
  <nb-card-header>
    <div class="card-header text-center">
      <h6><nb-icon icon="bar-chart-outline"></nb-icon> Statistika</h6>
    </div>
  </nb-card-header>
  <nb-card-body>
    <div class="kpi-section">
      <div class="kpi-loading" *ngIf="isDashboardLoading">
        <nb-spinner size="large"></nb-spinner>
      </div>
      <div class="kpi-grid" *ngIf="!isDashboardLoading && dashboardSummary">
        <div class="kpi-card" *ngFor="let card of getKpiCards()" (click)="openKpiDetail(card.key)">
          <span class="kpi-title">{{ card.label }}</span>
          <div class="kpi-value">{{ card.formattedValue }}<small *ngIf="card.unit"> {{ card.unit }}</small></div>
          <span class="kpi-hint">Kliknite za detalje</span>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col">
          <div class="chart-container" id="karticaStatistika">
            <nb-card>
              <nb-card-header>
                <div class="card-header text-center" id="header">
                  <h6>
                    <nb-icon icon="pie-chart"></nb-icon>
                    Pregled statistike
                  </h6>
                </div>
              </nb-card-header>
              <nb-card-body>
                <canvas id="pie">{{ chart }}</canvas>
              </nb-card-body>
            </nb-card>

          </div>
        </div>
        <div class="col">
          <div class="chart-container" id="karticaStatistika">
            <nb-card>
              <nb-card-header>
                <div class="card-header text-center" id="header">
                  <h6>
                    <nb-icon icon="activity-outline"></nb-icon>
                    Pregled statistike
                  </h6>
                </div>
              </nb-card-header>
              <nb-card-body>
                <canvas id="MyChart">{{ chart }}</canvas>
              </nb-card-body>
            </nb-card>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="chart-container" id="karticaStatistika">
            <nb-card>
              <nb-card-header>
                <div class="card-header text-center" id="header">
                  <h6>
                    <nb-icon icon="activity-outline"></nb-icon>
                    Pregled statistike
                  </h6>
                </div>
              </nb-card-header>
              <nb-card-body>
                <canvas id="line">{{ chart }}</canvas>
              </nb-card-body>
            </nb-card>

          </div>
        </div>
        <div class="col">
          <div class="chart-container" id="karticaStatistika">
            <nb-card>
              <nb-card-header>
                <div class="card-header text-center" id="header">
                  <h6>
                    <nb-icon icon="activity-outline"></nb-icon>
                    Pregled statistike
                  </h6>
                </div>
              </nb-card-header>
              <nb-card-body>
                <canvas id="chart1">{{ chart }}</canvas>
              </nb-card-body>
            </nb-card>

          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="chart-container" id="karticaStatistika">
            <nb-card>
              <nb-card-header>
                <div class="card-header text-center" id="header">
                  <h6>
                    <nb-icon icon="swap-outline"></nb-icon>
                    Poređenje današnjeg prometa
                  </h6>
                </div>
              </nb-card-header>
              <nb-card-body>
                <canvas id="dayComparisonChart"></canvas>
              </nb-card-body>
            </nb-card>
          </div>
        </div>
        <div class="col">
          <div class="chart-container" id="karticaStatistika">
            <nb-card>
              <nb-card-header>
                <div class="card-header text-center" id="header">
                  <h6>
                    <nb-icon icon="trending-up-outline"></nb-icon>
                    Mjesečno poređenje prometa
                  </h6>
                </div>
              </nb-card-header>
              <nb-card-body>
                <canvas id="monthComparisonChart"></canvas>
              </nb-card-body>
            </nb-card>
          </div>
        </div>
      </div>
    </div>
  </nb-card-body>
</nb-card>

<ng-template #visitorsDetail>
  <nb-card>
    <nb-card-header>Trend posjetilaca</nb-card-header>
    <nb-card-body>
      <div class="modal-chart">
        <canvas id="visitorsTrendChart"></canvas>
      </div>
    </nb-card-body>
  </nb-card>
</ng-template>

<ng-template #turnoverDetail>
  <nb-card>
    <nb-card-header>Trend prometa</nb-card-header>
    <nb-card-body>
      <div class="modal-chart">
        <canvas id="turnoverTrendChart"></canvas>
      </div>
    </nb-card-body>
  </nb-card>
</ng-template>

<ng-template #shrinkageDetail>
  <nb-card>
    <nb-card-header>Trend otpisa</nb-card-header>
    <nb-card-body>
      <div class="modal-chart">
        <canvas id="shrinkageTrendChart"></canvas>
      </div>
    </nb-card-body>
  </nb-card>
</ng-template>

<ng-template #basketDetail>
  <nb-card>
    <nb-card-header>Prosječna vrijednost korpe</nb-card-header>
    <nb-card-body>
      <div class="modal-chart">
        <canvas id="basketTrendChart"></canvas>
      </div>
    </nb-card-body>
  </nb-card>
</ng-template>

<ng-template #categoryDetail>
  <nb-card>
    <nb-card-header>Udio kategorija u prodaji</nb-card-header>
    <nb-card-body>
      <div class="modal-chart">
        <canvas id="categoryShareChart"></canvas>
      </div>
    </nb-card-body>
  </nb-card>
</ng-template>