<form (ngSubmit)="prijava()" #form="ngForm" aria-labelledby="title" id="forma">
<h3 id="title" class="title" style="font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;">Prijava</h3>
<p class="sub-title">Konzum360</p>

<nb-alert *ngIf="showMessages.error && errors?.length && !submitted" outline="danger" role="alert">
  <p class="alert-title"><b>Greška</b></p>
  <ul class="alert-message-list">
    <li *ngFor="let error of errors" class="alert-message">{{ error }}</li>
  </ul>
</nb-alert>
  <div class="form-control-group">
    <label class="label" for="input-email">Korisničko ime:</label>
   <nb-form-field>
    <nb-icon icon="person" nbPrefix></nb-icon>
    <input nbInput
           [(ngModel)]="user.korisnickoIme"
           #email="ngModel"
           fullWidth
           name="email"
           id="input-email"
           placeholder="Unesite korisničko ime..."
           fieldSize="medium"
           shape="semi-round"
           autofocus
           [status]="!user.korisnickoIme  ? 'danger' : 'success'"
           [required]="getConfigValue('forms.validation.email.required')"
           [attr.aria-invalid]="email.invalid && email.touched ? true : null"
           data-testid="unos-korisnicko-ime">
   </nb-form-field>
    <ng-container *ngIf="email.invalid && email.touched">
      <p class="caption status-danger" *ngIf="email.errors?.required">
        Unesite korisničko ime
      </p>
    </ng-container>
  </div>
  <div class="form-control-group">
    <span class="label-with-link">
      <label class="label" for="input-password">Lozinka:</label>
    </span>
    <nb-form-field>
      <nb-icon [icon]="user.lozinka ? 'lock' : 'unlock'" nbPrefix></nb-icon>
    <input nbInput
           [(ngModel)]="user.lozinka"
           #password="ngModel"
           name="password"
           fullWidth
           type="password"
           id="input-password"
           placeholder="Unesite lozinku..."
           fieldSize="medium"
           shape="semi-round"
           [status]="password.dirty ? (password.invalid  ? 'danger' : 'success') : 'basic'"
           [required]="getConfigValue('forms.validation.password.required')"
           [minlength]="getConfigValue('forms.validation.password.minLength')"
           [maxlength]="getConfigValue('forms.validation.password.maxLength')"
           [attr.aria-invalid]="password.invalid && password.touched ? true : null"
           data-testid="unos-lozinka">
    </nb-form-field>
    <ng-container *ngIf="password.invalid && password.touched ">
      <p class="caption status-danger" *ngIf="password.errors?.required">
        Unesite lozinku
      </p>
    </ng-container>
  </div>
  <hr>
  <div class="row">
    <div class="col">
      <button nbButton
      id="button"
      fullWidth=""
      size="small"
      status="success"
      [disabled]="submitted || !form.valid"
      [class.btn-pulse]="submitted"
      data-testid="dugme-prijava">
<nb-icon icon="fa-sign-in-alt" pack="font-awesome"></nb-icon> Prijava
</button>
    </div>
  </div>
</form>
