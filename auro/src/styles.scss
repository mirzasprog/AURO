:root {
  color-scheme: light;
  --transition-duration: 180ms;
  --app-background: linear-gradient(180deg, #f4f6fb 0%, #edf1f7 100%);
  --app-surface: #ffffff;
  --sidebar-background: #ffffff;
  --sidebar-border: rgba(15, 23, 42, 0.08);
  --sidebar-text: #1f2937;
  --header-background: rgba(255, 255, 255, 0.92);
  --header-border: rgba(15, 23, 42, 0.08);
  --text-primary: #111827;
  --text-secondary: #374151;
  --text-muted: #6b7280;
  --heading-color: #111827;
  --link-color: #2563eb;
  --card-background: #ffffff;
  --card-border: rgba(15, 23, 42, 0.08);
  --card-shadow: 0 12px 30px rgba(15, 23, 42, 0.1);
  --card-hover-shadow: 0 20px 36px rgba(15, 23, 42, 0.12);
  --glass-blur: blur(10px);

  --dashboard-shell-bg: linear-gradient(180deg, rgba(255, 255, 255, 0.95) 0%, rgba(241, 245, 249, 0.95) 100%);
  --dashboard-card-background: var(--card-background);
  --dashboard-card-overlay: linear-gradient(180deg, rgba(59, 130, 246, 0.08) 0%, rgba(99, 102, 241, 0.05) 100%);
  --dashboard-card-highlight: transparent;
  --dashboard-card-border: var(--card-border);
  --dashboard-card-shadow: var(--card-shadow);
  --dashboard-subtitle-color: var(--text-muted);
  --dashboard-title-color: var(--heading-color);
  --dashboard-description-color: var(--text-secondary);

  --quick-action-background: linear-gradient(180deg, rgba(255, 255, 255, 0.92) 0%, rgba(243, 244, 246, 0.92) 100%);
  --quick-action-border: rgba(59, 130, 246, 0.18);
  --quick-action-shadow: 0 12px 26px rgba(15, 23, 42, 0.08);
  --quick-action-icon-bg: rgba(59, 130, 246, 0.12);
  --quick-action-icon-border: rgba(59, 130, 246, 0.24);
  --quick-action-text: var(--heading-color);
  --quick-action-muted: var(--text-muted);
  --quick-action-primary: linear-gradient(135deg, rgba(59, 130, 246, 0.22), rgba(99, 102, 241, 0.18));
  --quick-action-success: linear-gradient(135deg, rgba(34, 197, 94, 0.24), rgba(16, 185, 129, 0.18));
  --quick-action-warning: linear-gradient(135deg, rgba(251, 191, 36, 0.24), rgba(253, 224, 71, 0.18));
  --quick-action-warning-text: #78350f;

  --kpi-card-background: var(--card-background);
  --kpi-card-border: rgba(59, 130, 246, 0.15);
  --kpi-card-shadow: 0 12px 26px rgba(15, 23, 42, 0.08);
  --kpi-title-color: var(--text-muted);
  --kpi-value-color: var(--heading-color);
  --kpi-hint-color: var(--text-muted);

  --chart-card-background: var(--card-background);
  --chart-card-border: rgba(148, 163, 184, 0.22);
  --chart-card-shadow: 0 12px 26px rgba(15, 23, 42, 0.08);
  --chart-card-title: var(--heading-color);
  --chart-card-subtitle: var(--text-muted);
  --chart-icon-bg: rgba(59, 130, 246, 0.12);
  --chart-icon-color: #2563eb;
  --comparison-icon-bg: rgba(16, 185, 129, 0.16);
  --comparison-icon-color: #047857;
}

body[data-theme='dark'] {
  color-scheme: dark;
  --app-background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%);
  --app-surface: rgba(30, 41, 59, 0.94);
  --sidebar-background: rgba(15, 23, 42, 0.94);
  --sidebar-border: rgba(148, 163, 184, 0.16);
  --sidebar-text: rgba(226, 232, 240, 0.92);
  --header-background: rgba(15, 23, 42, 0.9);
  --header-border: rgba(148, 163, 184, 0.18);
  --text-primary: #f8fafc;
  --text-secondary: rgba(226, 232, 240, 0.82);
  --text-muted: rgba(148, 163, 184, 0.76);
  --heading-color: #f1f5f9;
  --link-color: #93c5fd;
  --card-background: rgba(30, 41, 59, 0.94);
  --card-border: rgba(148, 163, 184, 0.2);
  --card-shadow: 0 12px 28px rgba(2, 6, 23, 0.6);
  --card-hover-shadow: 0 16px 32px rgba(2, 6, 23, 0.7);
  --glass-blur: blur(12px);

  --dashboard-shell-bg: linear-gradient(180deg, rgba(15, 23, 42, 0.94) 0%, rgba(30, 41, 59, 0.94) 100%);
  --dashboard-card-background: var(--card-background);
  --dashboard-card-overlay: linear-gradient(180deg, rgba(148, 163, 184, 0.15), rgba(59, 130, 246, 0.08));
  --dashboard-card-highlight: transparent;
  --dashboard-card-border: var(--card-border);
  --dashboard-card-shadow: var(--card-shadow);
  --dashboard-subtitle-color: var(--text-muted);
  --dashboard-title-color: var(--heading-color);
  --dashboard-description-color: var(--text-secondary);

  --quick-action-background: linear-gradient(180deg, rgba(30, 41, 59, 0.96), rgba(15, 23, 42, 0.96));
  --quick-action-border: rgba(59, 130, 246, 0.28);
  --quick-action-shadow: 0 16px 32px rgba(2, 6, 23, 0.6);
  --quick-action-icon-bg: rgba(30, 64, 175, 0.24);
  --quick-action-icon-border: rgba(59, 130, 246, 0.32);
  --quick-action-text: var(--heading-color);
  --quick-action-muted: rgba(203, 213, 225, 0.78);
  --quick-action-primary: linear-gradient(135deg, rgba(59, 130, 246, 0.42), rgba(147, 197, 253, 0.28));
  --quick-action-success: linear-gradient(135deg, rgba(16, 185, 129, 0.42), rgba(134, 239, 172, 0.28));
  --quick-action-warning: linear-gradient(135deg, rgba(234, 179, 8, 0.42), rgba(250, 204, 21, 0.28));
  --quick-action-warning-text: rgba(254, 243, 199, 0.95);

  --kpi-card-background: var(--card-background);
  --kpi-card-border: rgba(59, 130, 246, 0.26);
  --kpi-card-shadow: 0 16px 32px rgba(2, 6, 23, 0.65);
  --kpi-title-color: rgba(148, 163, 184, 0.78);
  --kpi-value-color: var(--heading-color);
  --kpi-hint-color: rgba(148, 163, 184, 0.78);

  --chart-card-background: var(--card-background);
  --chart-card-border: rgba(59, 130, 246, 0.26);
  --chart-card-shadow: 0 16px 32px rgba(2, 6, 23, 0.65);
  --chart-card-title: var(--heading-color);
  --chart-card-subtitle: var(--text-secondary);
  --chart-icon-bg: rgba(59, 130, 246, 0.24);
  --chart-icon-color: #bfdbfe;
  --comparison-icon-bg: rgba(16, 185, 129, 0.26);
  --comparison-icon-color: #bbf7d0;
}

* {
  box-sizing: border-box;
}

body {
  min-height: 100vh;
  margin: 0;
  background: var(--app-background);
  color: var(--text-primary);
  font-family: 'Nunito', 'Inter', 'Segoe UI', sans-serif;
  transition: background var(--transition-duration) ease, color var(--transition-duration) ease;
}

::selection {
  background: rgba(37, 99, 235, 0.2);
}

nb-layout,
nb-layout .layout,
nb-layout .layout-container,
nb-layout .scrollable-container,
nb-layout-column {
  background: transparent !important;
}

nb-layout-header,
nb-layout-footer {
  background: var(--header-background) !important;
  border-color: var(--header-border) !important;
  backdrop-filter: var(--glass-blur);
  transition: background var(--transition-duration) ease, border-color var(--transition-duration) ease;
}

nb-sidebar {
  background: var(--sidebar-background) !important;
  color: var(--sidebar-text) !important;
  border-right: 1px solid var(--sidebar-border) !important;
  backdrop-filter: var(--glass-blur);
  transition: background var(--transition-duration) ease, color var(--transition-duration) ease,
    border-color var(--transition-duration) ease;
}

nb-sidebar ::ng-deep nb-menu .menu-item a {
  color: var(--text-secondary);
  transition: color var(--transition-duration) ease, background var(--transition-duration) ease;
}

nb-sidebar ::ng-deep nb-menu .menu-item a.active,
nb-sidebar ::ng-deep nb-menu .menu-item a:hover {
  color: var(--link-color);
  background: rgba(37, 99, 235, 0.1);
}

nb-card {
  background: var(--card-background) !important;
  border: 1px solid var(--card-border) !important;
  border-radius: 1rem !important;
  box-shadow: var(--card-shadow) !important;
  padding: 0 !important;
  backdrop-filter: var(--glass-blur);
  transition: box-shadow var(--transition-duration) ease, transform var(--transition-duration) ease,
    border-color var(--transition-duration) ease, background var(--transition-duration) ease;
}

nb-card:hover {
  box-shadow: var(--card-hover-shadow) !important;
  transform: translateY(-2px);
}

nb-card-header,
nb-card-body,
nb-card-footer {
  color: var(--text-primary);
  transition: color var(--transition-duration) ease;
}

button[nbButton] {
  border-radius: 999px !important;
  font-weight: 600;
  transition: background var(--transition-duration) ease, color var(--transition-duration) ease,
    box-shadow var(--transition-duration) ease, transform var(--transition-duration) ease;
}

button[nbButton]:hover {
  transform: translateY(-1px);
}

nb-user {
  color: var(--text-primary) !important;
}

nb-icon {
  transition: color var(--transition-duration) ease, transform var(--transition-duration) ease;
}

@media (prefers-reduced-motion: reduce) {
  :root {
    --transition-duration: 0ms;
  }

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  nb-card,
  button[nbButton],
  nb-icon {
    transition: none !important;
  }
}
